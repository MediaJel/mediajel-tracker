!function(){function e(e,t,a,n){Object.defineProperty(e,t,{get:a,set:n,enumerable:!0,configurable:!0})}var t=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire07df,a=t.register;a("1JSyC",function(a,n){e(a.exports,"default",function(){return l});var o=t("2hYdk"),r=t("kDidw"),i=t("ayme0"),s=t("eU8cG"),c=t("gI1kx"),l=()=>{if(window.location.href.includes("/thank-you")&&(0,c.pollForElement)([".flex.flex-col.lg\\:flex-row.lg\\:space-x-8"],()=>{window.dataLayer=window.dataLayer||[];for(let e=0;e<window.dataLayer.length;e++){let t=window.dataLayer[e];if("purchase"===t.event){let e=t.ecommerce;(0,r.isTrackerLoaded)(()=>{(0,i.runOncePerPageLoad)(()=>{(0,o.default).notify({transactionEvent:{id:e.transaction_id.toString(),total:parseFloat(e.value),tax:parseFloat(e.tax)||0,shipping:parseFloat(e.shipping)||0,city:"N/A",country:"USA",currency:"USD",state:"N/A",items:e.items.map(t=>({orderId:e.transaction_id.toString(),sku:t.item_id.toString(),name:(t.item_name||"N/A").toString(),category:(t.item_category||"N/A").toString(),unitPrice:parseFloat(t.price||0),quantity:parseInt(t.quantity||1),currency:"USD"}))}}),sessionStorage.setItem("key","loaded")})})}}}),!sessionStorage.getItem("key")){window.dataLayer=window.dataLayer||[];for(let e=0;e<window.dataLayer.length;e++){let t=window.dataLayer[e];if("purchase"===t.event){let e=t.ecommerce;(0,r.isTrackerLoaded)(()=>{(0,i.runOncePerPageLoad)(()=>{(0,o.default).notify({transactionEvent:{id:e.transaction_id.toString(),total:parseFloat(e.value),tax:parseFloat(e.tax)||0,shipping:parseFloat(e.shipping)||0,city:"N/A",country:"USA",currency:"USD",state:"N/A",items:e.items.map(t=>({orderId:e.transaction_id.toString(),sku:t.id.toString(),name:(t.name||"N/A").toString(),category:(t.category||"N/A").toString(),unitPrice:parseFloat(t.price||0),quantity:parseInt(t.quantity||1),currency:"USD"}))}}),sessionStorage.setItem("key","loaded")})})}}}(0,s.xhrResponseSource)(e=>{try{let t=JSON.parse(e.responseText),a=t&&t.items;if(void 0!==a||0!==a.length){let e=JSON.stringify(t);sessionStorage.setItem("pixelData",e)}}catch(e){}}),(window.location.pathname.includes("/checkout/onepage/success/")||window.location.pathname.includes("/success/"))&&setTimeout(()=>{try{let e=sessionStorage.getItem("pixelData"),t=JSON.parse(e),a=t&&t.items,n=document.querySelector(".checkout-success").querySelector("span").textContent.trim();(0,o.default).notify({transactionEvent:{id:n,total:parseFloat(t.base_grand_total),tax:parseFloat(t.base_tax_amount)||0,shipping:parseFloat(t.base_shipping_amount)||0,city:"N/A",state:"N/A",country:"N/A",currency:"USD",items:a.map(e=>{let{item_id:t,name:a,price:o,qty:r}=e;return{orderId:n.toString(),productId:t.toString(),sku:t.toString(),name:(a||"N/A").toString(),category:"N/A",unitPrice:parseFloat(o||0),quantity:parseInt(r||1),currency:"USD"}})}})}catch(e){}sessionStorage.setItem("pixelData","0")},1e3)}}),a("kDidw",function(t,a){e(t.exports,"isTrackerLoaded",function(){return n});let n=e=>{if(window.tracker)e();else{let t=!1,a=setInterval(()=>{window.tracker&&!t&&(t=!0,clearInterval(a),e())},100)}}}),a("ayme0",function(a,n){e(a.exports,"runOncePerPageLoad",function(){return r});var o=t("lwczO");let r=e=>{sessionStorage.getItem("key")?(0,o.default).info("Already run in this session"):((0,o.default).info("First run in this session"),e(),sessionStorage.setItem("key","loaded")),window.addEventListener("beforeunload",()=>{sessionStorage.removeItem("key")}),window.addEventListener("popstate",()=>{sessionStorage.removeItem("key")});let t=history.pushState,a=history.replaceState;history.pushState=function(...e){t.apply(this,e),sessionStorage.removeItem("key"),window.dispatchEvent(new Event("popstate"))},history.replaceState=function(...e){a.apply(this,e),sessionStorage.removeItem("key"),window.dispatchEvent(new Event("popstate"))}}}),a("gI1kx",function(t,a){e(t.exports,"pollForElement",function(){return n});let n=(e,t,a=100,n=3e4)=>{let o=Date.now(),r=setInterval(()=>{e.map(e=>null!==document.querySelector(e)).every(Boolean)?(clearInterval(r),t()):Date.now()-o>=n&&clearInterval(r)},a)}})}();
//# sourceMappingURL=magento.a5c0d1ba.js.map
