!function(){function e(e,t,a,n){Object.defineProperty(e,t,{get:a,set:n,enumerable:!0,configurable:!0})}var t=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire07df,a=t.register;a("aPBGq",function(a,n){e(a.exports,"default",function(){return u});var r=t("2hYdk"),o=t("apXfG"),i=t("3tZSl"),s=t("ayme0"),d=t("lSX0J"),u=e=>{let t=(0,d.multiAdapterHandler)(e);t.add("DatalayerSource",()=>{(0,i.datalayerSource)(e=>{if("purchase"===e[1])try{let{transaction_id:t,tax:a,value:n,items:o}=e[2];(0,r.default).notify({transactionEvent:{total:parseFloat(n),id:t.toString(),tax:a,shipping:0,city:"N/A",state:"N/A",country:"USA",currency:"USD",items:o.map(e=>{let{item_name:a,item_category:n,price:r,quantity:o}=e;return{orderId:t.toString(),sku:a.toString()||"N/A",name:(null==a?void 0:a.toString())||"N/A",category:(null==n?void 0:n.toString())||"N/A",unitPrice:parseFloat(r||0),quantity:parseInt(o||1),currency:"USD"}})}})}catch(e){}},window.gtmDataLayer)}),t.add("FetchSource",()=>{(0,o.fetchSource)(e=>{},(e,t)=>{if(window.addEventListener("beforeunload",()=>{sessionStorage.removeItem("key")}),window.location.href.includes("/checkout-complete"))try{(0,s.runOncePerPageLoad)(()=>{(0,r.default).notify({transactionEvent:{total:parseFloat(t.total||0),id:t.id,tax:parseFloat(t.totalTax||0),shipping:0,city:"N/A",state:"N/A",country:"USA",currency:"USD",items:t.items.map(e=>({orderId:t.id,sku:e.product.sku||"N/A",name:e.product.name||"N/A",category:e.product.productCategoryName||"N/A",unitPrice:parseFloat(e.price||0),quantity:parseInt(e.quantity||1),currency:"USD"}))}})})}catch(e){}})}),t.execute()}}),a("ayme0",function(a,n){e(a.exports,"runOncePerPageLoad",function(){return o});var r=t("lwczO");let o=e=>{sessionStorage.getItem("key")?(0,r.default).info("Already run in this session"):((0,r.default).info("First run in this session"),e(),sessionStorage.setItem("key","loaded")),window.addEventListener("beforeunload",()=>{sessionStorage.removeItem("key")}),window.addEventListener("popstate",()=>{sessionStorage.removeItem("key")});let t=history.pushState,a=history.replaceState;history.pushState=function(...e){t.apply(this,e),sessionStorage.removeItem("key"),window.dispatchEvent(new Event("popstate"))},history.replaceState=function(...e){a.apply(this,e),sessionStorage.removeItem("key"),window.dispatchEvent(new Event("popstate"))}}}),a("lSX0J",function(a,n){let r;e(a.exports,"multiAdapterHandler",function(){return d});var o=t("lwczO"),i=t("2hYdk");let s=e=>{e.context.appId;let t=!1,a=[];return{add:(e,t)=>{(0,o.default).info(`Adding ${e} to the adapter handler...`),a.push({name:e,fn:t})},execute:()=>{for(let{name:e,fn:n}of((0,o.default).info("Executing adapter handler..."),a)){let a=!1;(0,i.default).subscribe(e=>{e.transactionEvent&&(a=!0)});try{if((0,o.default).info(`Attempting transaction with ${e}`),n(),a){t=!0,(0,o.default).info(`Transaction successful with ${e}`);return}}catch(t){(0,o.default).error(`Transaction Failed with ${e}`,t)}}t||(0,o.default).error("All transaction attempts failed for the adapter.")}}},d=(r=null,e=>(r||(r=s(e)),r))})}();
//# sourceMappingURL=dispense.8a90a0e3.js.map
