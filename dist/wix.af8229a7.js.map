{"mappings":"A,I,E,A,C,E,C,E,A,C,A,a,O,W,W,A,a,O,K,K,A,a,O,O,O,A,a,O,O,O,C,C,E,iB,E,Q,A,E,Q,S,C,C,C,E,O,c,C,E,O,C,U,C,I,W,O,C,E,I,K,E,W,C,E,a,C,C,G,I,E,E,SCqEA,EAjE6B,KAC3B,SAAS,IACP,OAAO,sBAAsB,CAAC,QAAQ,CAAC,qBAAsB,CAAC,EAAG,KAC/D,QAAQ,GAAG,CAAC,UAAW,GACb,cAAN,IACF,QAAQ,GAAG,CAAC,cAAe,GAC3B,AAAA,CAAA,EAAA,EAAA,OAAS,AAAT,EAAW,MAAM,CAAC,CAChB,eAAgB,CACd,IAAM,AAAA,CAAA,EAAE,GAAG,EAAI,KAAA,EAAO,QAAQ,GAC9B,KAAO,AAAA,CAAA,EAAE,IAAI,EAAI,KAAA,EAAO,QAAQ,GAChC,SAAW,AAAA,CAAA,EAAE,QAAQ,EAAI,KAAA,EAAO,QAAQ,GACxC,UAAW,WAAW,EAAE,KAAK,EAC7B,SAAU,WAAW,EAAE,QAAQ,EAC/B,SAAW,AAAA,CAAA,EAAE,QAAQ,EAAI,KAAA,EAAO,QAAQ,EAC1C,CACF,IAGQ,mBAAN,IACF,QAAQ,GAAG,CAAC,mBAAoB,GAChC,AAAA,CAAA,EAAA,EAAA,OAAS,AAAT,EAAW,MAAM,CAAC,CAChB,oBAAqB,CACnB,IAAM,AAAA,CAAA,EAAE,GAAG,EAAI,KAAA,EAAO,QAAQ,GAC9B,KAAO,AAAA,CAAA,EAAE,IAAI,EAAI,KAAA,EAAO,QAAQ,GAChC,SAAW,AAAA,CAAA,EAAE,QAAQ,EAAI,KAAA,EAAO,QAAQ,GACxC,UAAW,WAAW,EAAE,KAAK,EAC7B,SAAU,WAAW,EAAE,QAAQ,EAC/B,SAAW,AAAA,CAAA,EAAE,QAAQ,EAAI,KAAA,EAAO,QAAQ,EAC1C,CACF,IAGQ,aAAN,IACF,QAAQ,GAAG,CAAC,aAAc,GAC1B,AAAA,CAAA,EAAA,EAAA,OAAS,AAAT,EAAW,MAAM,CAAC,CAChB,iBAAkB,CAChB,GAAK,AAAA,CAAA,EAAE,OAAO,EAAI,KAAA,EAAO,QAAQ,GACjC,MAAO,WAAW,EAAE,OAAO,EAAI,GAC/B,IAAK,WAAW,EAAE,GAAG,EAAI,GACzB,SAAU,WAAW,EAAE,QAAQ,EAAI,GACnC,KAAM,MACN,MAAO,MACP,QAAS,MACT,SAAW,AAAA,CAAA,EAAE,QAAQ,EAAI,KAAA,EAAO,QAAQ,GACxC,MAAO,EAAE,QAAQ,CAAC,GAAG,CAAC,AAAC,GACd,CAAA,CACL,QAAU,AAAA,CAAA,EAAE,OAAO,EAAI,KAAA,EAAO,QAAQ,GACtC,UAAY,AAAA,CAAA,EAAQ,EAAE,EAAI,KAAA,EAAO,QAAQ,GACzC,IAAM,AAAA,CAAA,EAAQ,GAAG,EAAI,KAAA,EAAO,QAAQ,GACpC,KAAO,AAAA,CAAA,EAAQ,IAAI,EAAI,KAAA,EAAO,QAAQ,GACtC,SAAW,AAAA,CAAA,EAAQ,QAAQ,EAAI,KAAA,EAAO,QAAQ,GAC9C,UAAW,WAAW,EAAQ,KAAK,EAAI,GACvC,SAAU,WAAW,EAAQ,QAAQ,EAAI,GACzC,SAAW,AAAA,CAAA,EAAE,QAAQ,EAAI,KAAA,EAAO,QAAQ,EAC1C,CAAA,EAEJ,CACF,GAEJ,EACF,CAEA,OAAO,sBAAsB,CAAG,IAAsB,OAAO,gBAAgB,CAAC,8BAA+B,EAC/G,C","sources":["<anon>","src/shared/environment-data-sources/wix.ts"],"sourcesContent":["(function () {\n\nfunction $parcel$export(e, n, v, s) {\n  Object.defineProperty(e, n, {get: v, set: s, enumerable: true, configurable: true});\n}\n\n      var $parcel$global =\n        typeof globalThis !== 'undefined'\n          ? globalThis\n          : typeof self !== 'undefined'\n          ? self\n          : typeof window !== 'undefined'\n          ? window\n          : typeof global !== 'undefined'\n          ? global\n          : {};\n  var parcelRequire = $parcel$global[\"parcelRequire07df\"];\nvar parcelRegister = parcelRequire.register;\nparcelRegister(\"jVBUk\", function(module, exports) {\n\n$parcel$export(module.exports, \"default\", function () { return $76ae2ff2428ab573$export$2e2bcd8739ae039; });\n\nvar $2hYdk = parcelRequire(\"2hYdk\");\nconst $76ae2ff2428ab573$var$wixTrackerDataSource = ()=>{\n    function registerListeners() {\n        window.wixDevelopersAnalytics.register(\"conversionListener\", (e, p)=>{\n            console.log(\"Event: \", e);\n            if (e === \"AddToCart\") {\n                console.log(\"AddToCart: \", p);\n                (0, $2hYdk.default).notify({\n                    addToCartEvent: {\n                        sku: (p.sku || \"N/A\").toString(),\n                        name: (p.name || \"N/A\").toString(),\n                        category: (p.category || \"N/A\").toString(),\n                        unitPrice: parseFloat(p.price),\n                        quantity: parseFloat(p.quantity),\n                        currency: (p.currency || \"USD\").toString()\n                    }\n                });\n            }\n            if (e === \"RemoveFromCart\") {\n                console.log(\"RemoveFromCart: \", p);\n                (0, $2hYdk.default).notify({\n                    removeFromCartEvent: {\n                        sku: (p.sku || \"N/A\").toString(),\n                        name: (p.name || \"N/A\").toString(),\n                        category: (p.category || \"N/A\").toString(),\n                        unitPrice: parseFloat(p.price),\n                        quantity: parseFloat(p.quantity),\n                        currency: (p.currency || \"USD\").toString()\n                    }\n                });\n            }\n            if (e === \"Purchase\") {\n                console.log(\"Purchase: \", p);\n                (0, $2hYdk.default).notify({\n                    transactionEvent: {\n                        id: (p.orderId || \"N/A\").toString(),\n                        total: parseFloat(p.revenue || 0),\n                        tax: parseFloat(p.tax || 0),\n                        shipping: parseFloat(p.shipping || 0),\n                        city: \"N/A\",\n                        state: \"N/A\",\n                        country: \"N/A\",\n                        currency: (p.currency || \"USD\").toString(),\n                        items: p.contents.map((product)=>{\n                            return {\n                                orderId: (p.orderId || \"N/A\").toString(),\n                                productId: (product.id || \"N/A\").toString(),\n                                sku: (product.sku || \"N/A\").toString(),\n                                name: (product.name || \"N/A\").toString(),\n                                category: (product.category || \"N/A\").toString(),\n                                unitPrice: parseFloat(product.price || 0),\n                                quantity: parseFloat(product.quantity || 1),\n                                currency: (p.currency || \"USD\").toString()\n                            };\n                        })\n                    }\n                });\n            }\n        });\n    }\n    window.wixDevelopersAnalytics ? registerListeners() : window.addEventListener(\"wixDevelopersAnalyticsReady\", registerListeners);\n};\nvar $76ae2ff2428ab573$export$2e2bcd8739ae039 = $76ae2ff2428ab573$var$wixTrackerDataSource;\n\n});\n\n})();\n//# sourceMappingURL=wix.af8229a7.js.map\n","import observable from \"src/shared/utils/create-events-observable\";\n\nimport { TransactionCartItem } from \"../types\";\n\nconst wixTrackerDataSource = () => {\n  function registerListeners() {\n    window.wixDevelopersAnalytics.register(\"conversionListener\", (e, p) => {\n      console.log(\"Event: \", e);\n      if (e === \"AddToCart\") {\n        console.log(\"AddToCart: \", p);\n        observable.notify({\n          addToCartEvent: {\n            sku: (p.sku || \"N/A\").toString(),\n            name: (p.name || \"N/A\").toString(),\n            category: (p.category || \"N/A\").toString(),\n            unitPrice: parseFloat(p.price),\n            quantity: parseFloat(p.quantity),\n            currency: (p.currency || \"USD\").toString(),\n          },\n        });\n      }\n\n      if (e === \"RemoveFromCart\") {\n        console.log(\"RemoveFromCart: \", p);\n        observable.notify({\n          removeFromCartEvent: {\n            sku: (p.sku || \"N/A\").toString(),\n            name: (p.name || \"N/A\").toString(),\n            category: (p.category || \"N/A\").toString(),\n            unitPrice: parseFloat(p.price),\n            quantity: parseFloat(p.quantity),\n            currency: (p.currency || \"USD\").toString(),\n          },\n        });\n      }\n\n      if (e === \"Purchase\") {\n        console.log(\"Purchase: \", p);\n        observable.notify({\n          transactionEvent: {\n            id: (p.orderId || \"N/A\").toString(),\n            total: parseFloat(p.revenue || 0),\n            tax: parseFloat(p.tax || 0),\n            shipping: parseFloat(p.shipping || 0),\n            city: \"N/A\",\n            state: \"N/A\",\n            country: \"N/A\",\n            currency: (p.currency || \"USD\").toString(),\n            items: p.contents.map((product) => {\n              return {\n                orderId: (p.orderId || \"N/A\").toString(),\n                productId: (product.id || \"N/A\").toString(),\n                sku: (product.sku || \"N/A\").toString(),\n                name: (product.name || \"N/A\").toString(),\n                category: (product.category || \"N/A\").toString(),\n                unitPrice: parseFloat(product.price || 0),\n                quantity: parseFloat(product.quantity || 1),\n                currency: (p.currency || \"USD\").toString(),\n              } as TransactionCartItem;\n            }),\n          },\n        });\n      }\n    });\n  }\n\n  window.wixDevelopersAnalytics ? registerListeners() : window.addEventListener('wixDevelopersAnalyticsReady', registerListeners);\n};\n\nexport default wixTrackerDataSource;\n"],"names":["parcelRequire","parcelRegister","$parcel$global","globalThis","self","window","global","register","module","exports","Object","defineProperty","get","$76ae2ff2428ab573$export$2e2bcd8739ae039","set","s","enumerable","configurable","$2hYdk","registerListeners","wixDevelopersAnalytics","e","p","console","log","default","notify","addToCartEvent","sku","toString","name","category","unitPrice","parseFloat","price","quantity","currency","removeFromCartEvent","transactionEvent","id","orderId","total","revenue","tax","shipping","city","state","country","items","contents","map","product","productId","addEventListener"],"version":3,"file":"wix.af8229a7.js.map"}