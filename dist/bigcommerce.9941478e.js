!function(){function t(t,e,r,n){Object.defineProperty(t,e,{get:r,set:n,enumerable:!0,configurable:!0})}var e=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire07df,r=e.register;r("dPAKA",function(r,n){t(r.exports,"default",function(){return u});var i=e("2hYdk"),o=e("kDidw"),l=e("eU8cG"),a=e("3tZSl"),d=e("lSX0J"),u=t=>{let e=(0,d.multiAdapterHandler)(t);e.add("XHR Response Source #1",()=>{(0,l.xhrResponseSource)(t=>{var e,r,n,o;let l;if(!(null==t?void 0:t.responseText))return;try{let e=JSON.parse(t.responseText);if(!e||"object"!=typeof e)return;l=e}catch(t){return}let a=null==l?void 0:null===(e=l.lineItems)||void 0===e?void 0:e.physicalItems,d=localStorage.getItem("latestOrder");if((null==l?void 0:l.orderId)&&(null==l?void 0:l.status)==="AWAITING_FULFILLMENT"&&d!==l.orderId.toString())try{(0,i.default).notify({transactionEvent:{id:l.orderId.toString(),total:parseFloat(l.orderAmount),tax:parseFloat(l.taxTotal)||0,shipping:parseFloat(l.shippingCostTotal)||0,city:((null==l?void 0:null===(r=l.billingAddress)||void 0===r?void 0:r.city)||"N/A").toString(),state:((null==l?void 0:null===(n=l.billingAddress)||void 0===n?void 0:n.stateOrProvinceCode)||"N/A").toString(),country:((null==l?void 0:null===(o=l.billingAddress)||void 0===o?void 0:o.countryCode)||"N/A").toString(),currency:"USD",items:(null==a?void 0:a.map(t=>{let{sku:e,name:r,listPrice:n,quantity:i}=t;return{orderId:l.orderId.toString(),sku:(null==e?void 0:e.toString())||"N/A",name:(r||"N/A").toString(),category:"N/A",unitPrice:parseFloat(n||0),quantity:parseInt(i||1),currency:"USD"}}))||[]}}),localStorage.setItem("latestOrder",l.orderId.toString())}catch(t){}})}),e.add("XHR Response Source #2",()=>{(0,l.xhrResponseSource)(t=>{let e;try{e=JSON.parse(t.responseText)}catch(t){return}if((null==e?void 0:e.status)&&(null==e?void 0:e.orderAmount)>0)try{(0,o.isTrackerLoaded)(()=>{var t,r,n,o,l,a;(0,i.default).notify({transactionEvent:{id:(null==e?void 0:null===(t=e.orderId)||void 0===t?void 0:t.toString())||"",total:parseFloat((null==e?void 0:e.orderAmount)||0),tax:parseFloat((null==e?void 0:e.taxTotal)||0),shipping:parseFloat((null==e?void 0:e.shippingCostTotal)||0),city:((null==e?void 0:null===(r=e.billingAddress)||void 0===r?void 0:r.city)||"N/A").toString(),state:((null==e?void 0:null===(n=e.billingAddress)||void 0===n?void 0:n.stateOrProvinceCode)||"N/A").toString(),country:((null==e?void 0:null===(o=e.billingAddress)||void 0===o?void 0:o.countryCode)||"N/A").toString(),currency:"USD",items:(null==e?void 0:null===(a=e.lineItems)||void 0===a?void 0:null===(l=a.physicalItems)||void 0===l?void 0:l.map(t=>{var r,n;return{orderId:(null==e?void 0:null===(r=e.orderId)||void 0===r?void 0:r.toString())||"",sku:(null==t?void 0:null===(n=t.sku)||void 0===n?void 0:n.toString())||"N/A",name:((null==t?void 0:t.name)||"N/A").toString(),category:"N/A",unitPrice:parseFloat((null==t?void 0:t.listPrice)||0),quantity:parseInt((null==t?void 0:t.quantity)||1),currency:"USD"}}))||[]}})})}catch(t){}})}),e.add("Datalayer Source",()=>{(0,a.datalayerSource)(t=>{let e=t[2],r=(null==e?void 0:e.items)||[];"purchase"===t[1]&&(0,i.default).notify({transactionEvent:{id:e.transaction_id.toString(),total:parseFloat(e.value||0),tax:parseFloat(e.tax||0),shipping:parseFloat(e.shipping||0),city:"N/A",state:"N/A",country:"N/A",currency:"USD",items:r.map(t=>({orderId:e.transaction_id.toString(),sku:t.item_id.toString()||"N/A",name:(t.item_name||"N/A").toString(),category:t.item_category.toString()||"N/A",unitPrice:parseFloat(t.price||0),quantity:parseInt(t.quantity||1),currency:"USD"}))}})})}),e.execute()}}),r("kDidw",function(e,r){t(e.exports,"isTrackerLoaded",function(){return n});let n=t=>{if(window.tracker)t();else{let e=!1,r=setInterval(()=>{window.tracker&&!e&&(e=!0,clearInterval(r),t())},100)}}}),r("lSX0J",function(r,n){let i;t(r.exports,"multiAdapterHandler",function(){return d});var o=e("lwczO"),l=e("2hYdk");let a=t=>{t.context.appId;let e=!1,r=[];return{add:(t,e)=>{(0,o.default).info(`Adding ${t} to the adapter handler...`),r.push({name:t,fn:e})},execute:()=>{for(let{name:t,fn:n}of((0,o.default).info("Executing adapter handler..."),r)){let r=!1;(0,l.default).subscribe(t=>{t.transactionEvent&&(r=!0)});try{if((0,o.default).info(`Attempting transaction with ${t}`),n(),r){e=!0,(0,o.default).info(`Transaction successful with ${t}`);return}}catch(e){(0,o.default).error(`Transaction Failed with ${t}`,e)}}e||(0,o.default).error("All transaction attempts failed for the adapter.")}}},d=(i=null,t=>(i||(i=a(t)),i))})}();
//# sourceMappingURL=bigcommerce.9941478e.js.map
