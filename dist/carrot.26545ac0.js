!function(){function t(t,e,r,a){Object.defineProperty(t,e,{get:r,set:a,enumerable:!0,configurable:!0})}var e=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire07df,r=e.register;r("fRKTS",function(r,a){t(r.exports,"default",function(){return u});var n=e("2hYdk"),i=e("kDidw"),o=e("apXfG"),d=e("lSX0J"),l=e("lwczO"),u=t=>{let e=(0,d.multiAdapterHandler)(t);e.add("Fetch Response Source",()=>{(0,o.fetchSource)(t=>{},(t,e)=>{var r;window.location.href.includes("/store/activity")&&e&&(null==e||null===(r=e.orders)||void 0===r||r.forEach(t=>{var e;if((null==t?void 0:null===(e=t.details)||void 0===e?void 0:e.status)==="open")try{(0,i.isTrackerLoaded)(()=>{(0,n.default).notify({transactionEvent:{id:t.details.id||"N/A",total:parseFloat(t.details.total||0),tax:parseFloat(t.details.tax||0),shipping:0,city:"N/A",state:"N/A",country:"USA",currency:"USD",items:t.items.map(e=>({orderId:t.details.id||"N/A",sku:e.product.id.toString()||"N/A",name:(e.product.name||"N/A").toString(),category:(e.product.categoryName||"N/A").toString(),unitPrice:parseFloat(e.price)||0,quantity:parseInt(e.unitQty)||1,currency:"USD"}))||[]}})})}catch(t){(0,l.default).error("Carrot: Error parsing response body",t)}}))})}),e.execute()}}),r("kDidw",function(e,r){t(e.exports,"isTrackerLoaded",function(){return a});let a=t=>{if(window.tracker)t();else{let e=!1,r=setInterval(()=>{window.tracker&&!e&&(e=!0,clearInterval(r),t())},100)}}}),r("lSX0J",function(r,a){let n;t(r.exports,"multiAdapterHandler",function(){return l});var i=e("lwczO"),o=e("2hYdk");let d=t=>{t.context.appId;let e=!1,r=[];return{add:(t,e)=>{(0,i.default).info(`Adding ${t} to the adapter handler...`),r.push({name:t,fn:e})},execute:()=>{for(let{name:t,fn:a}of((0,i.default).info("Executing adapter handler..."),r)){let r=!1;(0,o.default).subscribe(t=>{t.transactionEvent&&(r=!0)});try{if((0,i.default).info(`Attempting transaction with ${t}`),a(),r){e=!0,(0,i.default).info(`Transaction successful with ${t}`);return}}catch(e){(0,i.default).error(`Transaction Failed with ${t}`,e)}}e||(0,i.default).error("All transaction attempts failed for the adapter.")}}},l=(n=null,t=>(n||(n=d(t)),n))})}();
//# sourceMappingURL=carrot.26545ac0.js.map
