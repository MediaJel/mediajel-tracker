{"mappings":"A,C,E,A,A,C,A,a,O,W,W,A,a,O,K,K,A,a,O,O,O,A,a,O,O,O,C,C,E,iB,C,Q,A,E,Q,S,C,C,C,E,O,c,C,E,O,C,U,C,I,W,O,C,E,I,K,E,W,C,E,a,C,C,GCqEA,IAAA,EAnEuD,AACrD,IAEA,GAAM,CAAA,MAAE,CAAK,CAAA,SAAE,CAAQ,CAAA,YAAE,CAAW,CAAE,CAAG,EAEzC,MAAO,CACL,iBAAiB,CAAK,EACpB,OAAO,OAAO,CAAC,WAAY,CACzB,QAAS,EAAM,EAAE,CACjB,YAAa,EAAM,WAAW,EAAK,CAAA,MAAA,EAAA,EAAY,CAAA,EAC/C,MAAO,EAAM,KAAK,CAClB,IAAK,EAAM,GAAG,CACd,SAAU,EAAM,QAAQ,CACxB,KAAM,EAAM,IAAI,CAChB,MAAO,EAAM,KAAK,CAClB,QAAS,EAAM,OAAO,CACtB,SAAU,EAAM,QAAQ,CACxB,QAAS,CACP,CACE,OAAQ,iEACR,KAAM,CACJ,KAAM,EACN,gBAAiB,EAAM,yBAAyB,CAChD,SAAU,EAAM,QAAQ,CACxB,YAAa,EAAM,UAAU,AAC/B,CACF,EACD,AACH,GAEA,EAAM,KAAK,CAAC,OAAO,CAAC,AAAC,IACnB,OAAO,OAAO,CAAC,UAAW,CACxB,QAAS,EAAK,OAAO,CACrB,IAAK,EAAK,GAAG,CACb,KAAM,EAAK,IAAI,CACf,SAAU,EAAK,QAAQ,CACvB,MAAO,EAAK,SAAS,CACrB,SAAU,EAAK,QAAQ,CACvB,SAAU,EAAK,QAAQ,AACzB,EACF,GAEA,OAAO,OAAO,CAAC,aACjB,EACA,eAAe,CAAK,EAClB,OAAO,OAAO,CAAC,iBAAkB,CAC/B,IAAK,EAAM,GAAG,CACd,KAAM,EAAM,IAAI,CAChB,SAAU,EAAM,QAAQ,CACxB,UAAW,EAAM,SAAS,CAC1B,SAAU,EAAM,QAAQ,CACxB,SAAU,EAAM,QAAQ,AAC1B,EACF,EACA,oBAAoB,CAAK,EACvB,OAAO,OAAO,CAAC,sBAAuB,CACpC,IAAK,EAAM,GAAG,CACd,KAAM,EAAM,IAAI,CAChB,SAAU,EAAM,QAAQ,CACxB,UAAW,EAAM,SAAS,CAC1B,SAAU,EAAM,QAAQ,CACxB,SAAU,EAAM,QAAQ,AAC1B,EACF,CACF,CACF,C","sources":["<anon>","src/shared/snowplow/v2/ecommerce.ts"],"sourcesContent":["(function () {\n\nfunction $parcel$export(e, n, v, s) {\n  Object.defineProperty(e, n, {get: v, set: s, enumerable: true, configurable: true});\n}\n\n      var $parcel$global =\n        typeof globalThis !== 'undefined'\n          ? globalThis\n          : typeof self !== 'undefined'\n          ? self\n          : typeof window !== 'undefined'\n          ? window\n          : typeof global !== 'undefined'\n          ? global\n          : {};\n  var parcelRequire = $parcel$global[\"parcelRequire07df\"];\nvar parcelRegister = parcelRequire.register;\nparcelRegister(\"bfVQq\", function(module, exports) {\n\n$parcel$export(module.exports, \"default\", function () { return $5bd5c81639d1eca2$export$2e2bcd8739ae039; });\nconst $5bd5c81639d1eca2$var$createSnowplowV2TrackerEcommerceEventsHandlers = (input)=>{\n    const { appId: appId, retailId: retailId, environment: environment } = input;\n    return {\n        trackTransaction (input) {\n            window.tracker(`addTrans`, {\n                orderId: input.id,\n                affiliation: input.affiliateId || (retailId !== null && retailId !== void 0 ? retailId : appId),\n                total: input.total,\n                tax: input.tax,\n                shipping: input.shipping,\n                city: input.city,\n                state: input.state,\n                country: input.country,\n                currency: input.currency,\n                context: [\n                    {\n                        schema: \"iglu:com.mediajel.events/enhanced_transaction/jsonschema/1-0-1\",\n                        data: {\n                            cart: environment,\n                            transaction_ids: input.alternativeTransactionIds,\n                            discount: input.discount,\n                            coupon_code: input.couponCode\n                        }\n                    }\n                ]\n            });\n            input.items.forEach((item)=>{\n                window.tracker(`addItem`, {\n                    orderId: item.orderId,\n                    sku: item.sku,\n                    name: item.name,\n                    category: item.category,\n                    price: item.unitPrice,\n                    quantity: item.quantity,\n                    currency: item.currency\n                });\n            });\n            window.tracker(`trackTrans`);\n        },\n        trackAddToCart (input) {\n            window.tracker(\"trackAddToCart\", {\n                sku: input.sku,\n                name: input.name,\n                category: input.category,\n                unitPrice: input.unitPrice,\n                quantity: input.quantity,\n                currency: input.currency\n            });\n        },\n        trackRemoveFromCart (input) {\n            window.tracker(\"trackRemoveFromCart\", {\n                sku: input.sku,\n                name: input.name,\n                category: input.category,\n                unitPrice: input.unitPrice,\n                quantity: input.quantity,\n                currency: input.currency\n            });\n        }\n    };\n};\nvar $5bd5c81639d1eca2$export$2e2bcd8739ae039 = $5bd5c81639d1eca2$var$createSnowplowV2TrackerEcommerceEventsHandlers;\n\n});\n\n})();\n//# sourceMappingURL=ecommerce.66b8c4d7.js.map\n","import { CreateSnowplowTrackerInput, SnowplowTrackerEcommerceEvents } from \"src/shared/snowplow/types\";\n\nconst createSnowplowV2TrackerEcommerceEventsHandlers = (\n  input: CreateSnowplowTrackerInput,\n): SnowplowTrackerEcommerceEvents => {\n  const { appId, retailId, environment } = input;\n\n  return {\n    trackTransaction(input) {\n      window.tracker(`addTrans`, {\n        orderId: input.id,\n        affiliation: input.affiliateId || (retailId ?? appId),\n        total: input.total,\n        tax: input.tax,\n        shipping: input.shipping,\n        city: input.city,\n        state: input.state,\n        country: input.country,\n        currency: input.currency,\n        context: [\n          {\n            schema: \"iglu:com.mediajel.events/enhanced_transaction/jsonschema/1-0-1\",\n            data: {\n              cart: environment,\n              transaction_ids: input.alternativeTransactionIds,\n              discount: input.discount,\n              coupon_code: input.couponCode,\n            },\n          },\n        ],\n      });\n\n      input.items.forEach((item) => {\n        window.tracker(`addItem`, {\n          orderId: item.orderId,\n          sku: item.sku,\n          name: item.name,\n          category: item.category,\n          price: item.unitPrice,\n          quantity: item.quantity,\n          currency: item.currency,\n        });\n      });\n\n      window.tracker(`trackTrans`);\n    },\n    trackAddToCart(input) {\n      window.tracker(\"trackAddToCart\", {\n        sku: input.sku,\n        name: input.name,\n        category: input.category,\n        unitPrice: input.unitPrice,\n        quantity: input.quantity,\n        currency: input.currency,\n      });\n    },\n    trackRemoveFromCart(input) {\n      window.tracker(\"trackRemoveFromCart\", {\n        sku: input.sku,\n        name: input.name,\n        category: input.category,\n        unitPrice: input.unitPrice,\n        quantity: input.quantity,\n        currency: input.currency,\n      });\n    },\n  };\n};\n\nexport default createSnowplowV2TrackerEcommerceEventsHandlers;\n"],"names":["parcelRequire","$parcel$global","globalThis","self","window","global","register","module","exports","Object","defineProperty","get","$5bd5c81639d1eca2$export$2e2bcd8739ae039","set","s","enumerable","configurable","input","appId","retailId","environment","trackTransaction","tracker","orderId","id","affiliation","affiliateId","total","tax","shipping","city","state","country","currency","context","schema","data","cart","transaction_ids","alternativeTransactionIds","discount","coupon_code","couponCode","items","forEach","item","sku","name","category","price","unitPrice","quantity","trackAddToCart","trackRemoveFromCart"],"version":3,"file":"ecommerce.66b8c4d7.js.map"}